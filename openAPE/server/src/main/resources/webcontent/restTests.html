<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>openAPE</title>
    <script>
        var serveraddress = "http://localhost:8080/openape/api/user-contexts";
		var sampleUserContext = '{"contexts":[{"id":"0","name":"computer operation system","preferences":[{"key":"/smalltext","value":"screen magnifier"},{"key":"/longtext","value":"screen reader"}]},{"id":"1","name":"ticket machine","preferences":[{"key":"/all","value":"high contrast"},{"key":"/text","value":"large font"}]}]}';
		var id;
		
        function saveData() {
            var req = new XMLHttpRequest();
            req.open("POST", serveraddress, true);
            req.send(sampleUserContext);
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("saveStatus").value = req.status;
					console.log(req.response);
					if (req.status === 201) {
						id = req.response;
					}
                }
            }
        }
		
		function loadData() {
            var req = new XMLHttpRequest();
            req.open("GET", serveraddress + "/" + id, true);
            req.send();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("loadStatus").value = req.status;
					console.log(req.response);
                }
            }
        }
		
		function updateData() {
            var req = new XMLHttpRequest();
            req.open("PUT", serveraddress + "/" + id, true);
            req.send(sampleUserContext);
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("updateStatus").value = req.status;
					console.log(req.response);
                }
            }
        }
		
		function deleteData() {
            var req = new XMLHttpRequest();
            req.open("DELETE", serveraddress + "/" + id, true);
            req.send();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("deleteStatus").value = req.status;
					console.log(req.response);
                }
            }
        }

</script>
</head>
<body>
<button type="button" id="saveData" onclick="saveData()">Kontext Speichern</button>
<label>Status:<input type="text" id="saveStatus"/></label><br>
<button type="button" id="loadData" onclick="loadData()">Kontext Laden</button>
<label>Status:<input type="text" id="loadStatus"/></label><br>
<button type="button" id="updateData" onclick="updateData()">Kontext Updaten</button>
<label>Status:<input type="text" id="updateStatus"/></label><br>
<button type="button" id="deleteData" onclick="deleteData()">Kontext Löschen</button>
<label>Status:<input type="text" id="deleteStatus"/></label><br>
<br>
<input type="file" id="resourceInput" name="resourceFile"><br>
<button type="button" id="saveRes" onclick="saveRes()">Resource Speichern</button>
<label>Status:<input type="text" id="resSaveStatus"/></label><br>
<button type="button" id="loadRes" onclick="loadRes()">Resource Laden</button>
<label>Status:<input type="text" id="resRoadStatus"/></label><br>
<button type="button" id="deleteRes" onclick="deleteRes()">Resource Löschen</button>
<label>Status:<input type="text" id="resDeleteStatus"/></label><br>
</body>
</html>