<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>openAPE</title>
    <script>
        var serveraddress = "http://localhost:8080/openape/api/user-contexts";
        var resourceServeraddress = "http://localhost:8080/openape/api/resource";
		var sampleUserContext = '{"contexts":[{"id":"0","name":"computer operation system","preferences":[{"key":"/smalltext","value":"screen magnifier"},{"key":"/longtext","value":"screen reader"}]},{"id":"1","name":"ticket machine","preferences":[{"key":"/all","value":"high contrast"},{"key":"/text","value":"large font"}]}]}';
		var id;
		
        function saveData() {
            var req = new XMLHttpRequest();
            req.open("POST", serveraddress, true);
            req.send(sampleUserContext);
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("saveStatus").value = req.status;
					console.log(req.response);
					if (req.status === 201) {
						id = req.response;
					}
                }
            }
        }
		
		function loadData() {
            var req = new XMLHttpRequest();
            req.open("GET", serveraddress + "/" + id, true);
            req.send();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("loadStatus").value = req.status;
					console.log(req.response);
                }
            }
        }
		
		function updateData() {
            var req = new XMLHttpRequest();
            req.open("PUT", serveraddress + "/" + id, true);
            req.send(sampleUserContext);
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("updateStatus").value = req.status;
					console.log(req.response);
                }
            }
        }
		
		function deleteData() {
            var req = new XMLHttpRequest();
            req.open("DELETE", serveraddress + "/" + id, true);
            req.send();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("deleteStatus").value = req.status;
					console.log(req.response);
                }
            }
        }

		
		function loadRes() {
            var req = new XMLHttpRequest();
            var resourceName = document.getElementById("resourceName").value;
            req.open("GET", resourceServeraddress + "/" + resourceName, true);
            req.send();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("resLoadStatus").value = req.status;
					console.log(req.response);
                }
            }
        }
		
		function deleteRes() {
            var req = new XMLHttpRequest();
            var resourceName = document.getElementById("resourceName").value;
            req.open("DELETE", resourceServeraddress + "/" + resourceName, true);
            req.send();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
					document.getElementById("resDeleteStatus").value = req.status;
					console.log(req.response);
                }
            }
        }

</script>
</head>
<body>
<button type="button" id="saveData" onclick="saveData()">store context</button>
<label>Status:<input type="text" id="saveStatus"/></label><br>
<button type="button" id="loadData" onclick="loadData()">load context</button>
<label>Status:<input type="text" id="loadStatus"/></label><br>
<button type="button" id="updateData" onclick="updateData()">update context</button>
<label>Status:<input type="text" id="updateStatus"/></label><br>
<button type="button" id="deleteData" onclick="deleteData()">delete context</button>
<label>Status:<input type="text" id="deleteStatus"/></label><br>
<br>
<form action="http://localhost:8080/openape/api/resource" method="post" enctype="multipart/form-data">
	<input name="file" id="filename" type="file" /><br><br>
	<button name="submit" type="submit">store resource</button>
</form>
<label>resource name<input type="text" id="resourceName"/></label><br>
<button type="button" id="loadRes" onclick="loadRes()">load resource</button>
<label>Status:<input type="text" id="resLoadStatus"/></label><br>
<button type="button" id="deleteRes" onclick="deleteRes()">delete resource</button>
<label>Status:<input type="text" id="resDeleteStatus"/></label><br>
</body>
</html>